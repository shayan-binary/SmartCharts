<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Analyse the financial markets using beautiful visualisations and unique trading tools, powered by a fast and intuitive interface." />
    <link rel="stylesheet" type="text/css" href="./dist/smartcharts.css?ea65254a" media="screen" />
    <title>SmartCharts | Binary.com</title>
    <link rel="apple-touch-icon" sizes="57x57" href="/dist/sass/favicons/apple-touch-icon-57x57.png"/>
    <link rel="apple-touch-icon" sizes="114x114" href="/dist/sass/favicons/apple-touch-icon-114x114.png"/>
    <link rel="apple-touch-icon" sizes="72x72" href="/dist/sass/favicons/apple-touch-icon-72x72.png"/>
    <link rel="apple-touch-icon" sizes="144x144" href="/dist/sass/favicons/apple-touch-icon-144x144.png"/>
    <link rel="apple-touch-icon" sizes="60x60" href="/dist/sass/favicons/apple-touch-icon-60x60.png"/>
    <link rel="apple-touch-icon" sizes="120x120" href="/dist/sass/favicons/apple-touch-icon-120x120.png"/>
    <link rel="apple-touch-icon" sizes="76x76" href="/dist/sass/favicons/apple-touch-icon-76x76.png"/>
    <link rel="apple-touch-icon" sizes="152x152" href="/dist/sass/favicons/apple-touch-icon-152x152.png"/>
    <link rel="apple-touch-icon" sizes="180x180" href="/dist/sass/favicons/apple-touch-icon-180x180.png"/>
    <link rel="icon" sizes="192x192" type="image/png" href="/dist/sass/favicons/favicon-192x192.png"/>
    <link rel="icon" sizes="160x160" type="image/png" href="/dist/sass/favicons/favicon-160x160.png"/>
    <link rel="icon" sizes="96x96" type="image/png" href="/dist/sass/favicons/favicon-96x96.png"/>
    <link rel="icon" sizes="16x16" type="image/png" href="/dist/sass/favicons/favicon-16x16.png"/>
    <link rel="icon" sizes="32x32" type="image/png" href="/dist/sass/favicons/favicon-32x32.png"/>
</head>

<body>
<div id="root"></div>
<script type="text/javascript">
    //some special code to handle browser detection
    function detect() {
      if (typeof navigator !== 'undefined') {
        return parseUserAgent(navigator.userAgent);
      }
    }

    function detectOS(userAgentString) {
      var rules = getOperatingSystemRules();
      var detected = rules.filter(function (os) {
        return os.rule && os.rule.test(userAgentString);
      })[0];

      return detected ? detected.name : null;
    }

    function getNodeVersion() {
      var isNode = typeof process !== 'undefined' && process.version;
      return isNode && {
        name: 'node',
        version: process.version.slice(1),
        os: process.platform
      };
    }

    function parseUserAgent(userAgentString) {
      var browsers = getBrowserRules();
      if (!userAgentString) {
        return null;
      }

      var detected = browsers.map(function(browser) {
        var match = browser.rule.exec(userAgentString);
        var version = match && match[1].split(/[._]/).slice(0,3);

        if (version && version.length < 3) {
          version = version.concat(version.length == 1 ? [0, 0] : [0]);
        }

        return match && {
          name: browser.name,
          version: version.join('.')
        };
      }).filter(Boolean)[0] || null;

      if (detected) {
        detected.os = detectOS(userAgentString);
      }

      if (/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/i.test(userAgentString)) {
        detected = detected || {};
        detected.bot = true;
      }

      return detected;
    }

    function getBrowserRules() {
      return buildRules([
        [ 'aol', /AOLShield\/([0-9\._]+)/ ],
        [ 'edge', /Edge\/([0-9\._]+)/ ],
        [ 'yandexbrowser', /YaBrowser\/([0-9\._]+)/ ],
        [ 'vivaldi', /Vivaldi\/([0-9\.]+)/ ],
        [ 'kakaotalk', /KAKAOTALK\s([0-9\.]+)/ ],
        [ 'samsung', /SamsungBrowser\/([0-9\.]+)/ ],
        [ 'chrome', /(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/ ],
        [ 'phantomjs', /PhantomJS\/([0-9\.]+)(:?\s|$)/ ],
        [ 'crios', /CriOS\/([0-9\.]+)(:?\s|$)/ ],
        [ 'firefox', /Firefox\/([0-9\.]+)(?:\s|$)/ ],
        [ 'fxios', /FxiOS\/([0-9\.]+)/ ],
        [ 'opera', /Opera\/([0-9\.]+)(?:\s|$)/ ],
        [ 'opera', /OPR\/([0-9\.]+)(:?\s|$)$/ ],
        [ 'ie', /Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/ ],
        [ 'ie', /MSIE\s([0-9\.]+);.*Trident\/[4-7].0/ ],
        [ 'ie', /MSIE\s(7\.0)/ ],
        [ 'bb10', /BB10;\sTouch.*Version\/([0-9\.]+)/ ],
        [ 'android', /Android\s([0-9\.]+)/ ],
        [ 'ios', /Version\/([0-9\._]+).*Mobile.*Safari.*/ ],
        [ 'safari', /Version\/([0-9\._]+).*Safari/ ],
        [ 'facebook', /FBAV\/([0-9\.]+)/],
        [ 'instagram', /Instagram\ ([0-9\.]+)/],
        [ 'ios-webview', /AppleWebKit\/([0-9\.]+).*Mobile/]
      ]);
    }

    function getOperatingSystemRules() {
      return buildRules([
        [ 'iOS', /iP(hone|od|ad)/ ],
        [ 'Android OS', /Android/ ],
        [ 'BlackBerry OS', /BlackBerry|BB10/ ],
        [ 'Windows Mobile', /IEMobile/ ],
        [ 'Amazon OS', /Kindle/ ],
        [ 'Windows 3.11', /Win16/ ],
        [ 'Windows 95', /(Windows 95)|(Win95)|(Windows_95)/ ],
        [ 'Windows 98', /(Windows 98)|(Win98)/ ],
        [ 'Windows 2000', /(Windows NT 5.0)|(Windows 2000)/ ],
        [ 'Windows XP', /(Windows NT 5.1)|(Windows XP)/ ],
        [ 'Windows Server 2003', /(Windows NT 5.2)/ ],
        [ 'Windows Vista', /(Windows NT 6.0)/ ],
        [ 'Windows 7', /(Windows NT 6.1)/ ],
        [ 'Windows 8', /(Windows NT 6.2)/ ],
        [ 'Windows 8.1', /(Windows NT 6.3)/ ],
        [ 'Windows 10', /(Windows NT 10.0)/ ],
        [ 'Windows ME', /Windows ME/ ],
        [ 'Open BSD', /OpenBSD/ ],
        [ 'Sun OS', /SunOS/ ],
        [ 'Linux', /(Linux)|(X11)/ ],
        [ 'Mac OS', /(Mac_PowerPC)|(Macintosh)/ ],
        [ 'QNX', /QNX/ ],
        [ 'BeOS', /BeOS/ ],
        [ 'OS/2', /OS\/2/ ],
        [ 'Search Bot', /(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/ ]
      ]);
    }

    function buildRules(ruleTuples) {
      return ruleTuples.map(function(tuple) {
        return {
          name: tuple[0],
          rule: tuple[1]
        };
      });
    }
    var SupportedBrowser = {
        'Mac OS': {
            safari: 913,
            firefox: 2700,
            chrome: 4902623,
            opera: 3602130,
            yandexbrowser: 14122130,
        },
        'Windows 10': {
            edge: 15150630,
            ie: 0, // not supported
            firefox: 3200,
            chrome: 4902623,
            opera: 3602130,
            yandexbrowser: 14122130,
        },
        'Windows 8.1': {
            ie: 0, // not supported at all
            firefox: 2700,
            chrome: 4902623,
            opera: 3602130,
            yandexbrowser: 14122130,
        },
        'Windows 8': {
            ie: 0, // not supported at all
            firefox: 2800,
            chrome: 4902623,
            opera: 3602130,
            yandexbrowser: 14122130,
        },
        'Windows 7': {
            ie: 0, // not supported at all
            firefox: 2700,
            chrome: 3601985,
            opera: 2601656,
            yandexbrowser: 14122130,
        },
    };
    function renderNotSupported(){
        var cqNotSupported = document.createElement('div');
        cqNotSupported.className = 'cq-not-supported';

        var cqLogo = document.createElement('div');
        cqLogo.className = 'cq-logo';
        cqNotSupported.appendChild(cqLogo);

        var cqIconNotSupported = document.createElement('div');
        cqIconNotSupported.className = 'cq-icon-not-supported';
        cqNotSupported.appendChild(cqIconNotSupported);

        var cqH1 = document.createElement('h1');
        cqH1.innerHTML = 'YOUR BROWSER IS NOT SUPPORTED';
        cqNotSupported.appendChild(cqH1);

        var cqP = document.createElement('p');
        cqP.innerHTML = 'Please update your browser for the best trading experience.';
        cqNotSupported.appendChild(cqP);

        var cqA = document.createElement('a');
        cqA.href = 'http://outdatedbrowser.com/';
        cqA.innerHTML = 'Update Browser';
        cqNotSupported.appendChild(cqA);
        
        document.getElementById('root').appendChild(cqNotSupported);

    }

    // creates a new exception type:
    function FatalError(){ Error.apply(this, arguments); this.name = "FatalError"; }
    FatalError.prototype = Object.create(Error.prototype);

    window.onerror = function(){
        console.log('window.onerror');
        renderNotSupported();
        alert('not supported');
        // and then, use this to trigger the error:
        throw new FatalError("Something went badly wrong!");
    }


    var browser = detect();
    if (browser) {
        var version = parseInt(browser.version.split('.').join(''));
        var name = browser.name;
        var os = browser.os;

        if (
            SupportedBrowser[os] && 
            SupportedBrowser[os][name] !== undefined) {
            
            console.log(version , SupportedBrowser[os][name], version < SupportedBrowser[os][name]);

            if(version < SupportedBrowser[os][name]){
                console.log('not supported');
                throw new Error("Something went badly wrong!");
            }
        } else {
            console.log('not detected');
        }
    }
</script>
<script src="./dist/babel-polyfill.min.js?45b9836b"></script>
<script src="./dist/chartiq.min.js?3c15098b"></script>
<script src="./dist/react.js?4fa58b08"></script>
<script src="./dist/react-dom.js?158e9b34"></script>
<script src="./dist/react-transition-group.js?137aecd5"></script>
<script src="./dist/mobx.js?5eedb7a8"></script>
<script src="./dist/mobx-react.js?a5ee9f35"></script>
<script src="./dist/smartcharts.js?6a258380"></script>
</body>

</html>
